{"version":3,"sources":["services/get-fragments.js","services/api.js","pages/Home.jsx","pages/GettingStarted.jsx","services/state.js","services/api-catalog.js","services/misc.js","pages/Dashboard.jsx","services/self.js","components/ApisMenu.jsx","components/SwaggerUiLayout.jsx","pages/Apis.jsx","components/AlertPopup.jsx","components/SignIn.jsx","components/Register.jsx","components/NavBar.jsx","index.js"],"names":["fragments","observable","loadHtml","path","fragment","jsx","fetch","then","response","text","parsedMarkdown","frontmatter","Object","objectSpread","react_default","a","createElement","with_html_default","escapeHtml","source","body","renderers","attributes","cachedClient","link","_ref","href","props","objectWithoutProperties","test","assign","target","rel","Link","to","HomePage","observer","Fragment","Segment","vertical","textAlign","style","color","backgroundColor","padding","margin","Image","centered","size","src","Header","as","Home","header","tagline","Button","positive","gettingStartedButton","apiListButton","Container","fluid","GettingStarted","awsRegion","window","config","region","cognitoRegion","cognitoUserPoolId","userPoolId","cognitoIdentityPoolId","identityPoolId","cognitoClientId","userPoolClientId","cognitoDomain","userPoolDomain","initApiGatewayClient","arguments","length","undefined","jwtToken","accessKeyId","secretAccessKey","sessionToken","cognito","apigClientFactory","newClient","apiGatewayClient","Promise","resolve","poller","setInterval","clearInterval","AWS","store","api","apiKey","apiList","loaded","apiGateway","generic","cognitoUser","usagePlans","subscriptions","initialize","this","clear","reset","_this","defaults","_len","keys","Array","_key","forEach","key","_","set","get","resetUserData","reactTo","triggerFn","effectFn","reaction","data","action","usagePlan","usagePlanId","subscribed","id","find","sub","apis","updateSubscriptionStatus","concat","logo","specificLogo","stage","headers","Accept","redirect","ok","fetchApiImage","catalogPromiseCache","subscriptionsPromiseCache","apiKeyPromiseCache","updateAllUserData","bustCache","all","updateUsagePlansAndApisList","updateSubscriptions","apiKeyOrPromise","_ref3","value","updateApiKey","_ref$data","reduce","acc","cloneDeep","catch","subscriptionsOrPromise","_ref2","mapUsageByDate","usage","usedOrRemaining","dates","items","apiKeyId","apiKeyUsage","startDate","apiKeyDate","Date","isArray","map","date","setDate","getDate","item","toConsumableArray","mapApiKeyUsageByDate","dailyUsage","used","remaining","sort","parseInt","confirmMarketplaceSubscription","token","put","toTitleCase","string","firstLetter","allOtherLetters","slice","toUpperCase","toLowerCase","loadUsage","canvasId","start","end","getFullYear","getMonth","toJSON","split","result","ctx","document","getElementById","JSON","stringify","labels","d","toLocaleDateString","weekday","year","month","day","max","Math","apply","chartConfig","type","datasets","label","quota","period","lineTension","borderColor","pointBackgroundColor","pointBorderColor","borderWidth","pointRadius","pointHoverRadius","options","scales","yAxes","ticks","beginAtZero","suggestedMax","Chart","error","console","userPool","Grid","container","Row","Column","paddingTop","background","border","borderRadius","Divider","filter","index","width","widescreen","marginBottom","Dashboard_Title","throttle","Message","info","rateLimit","burstLimit","content","toString","Loader","active","Title","firstApiName","swagger","title","List","Item","extraApiCount","Popup","trigger","cursor","on","position","poolData","UserPoolId","ClientId","isAuthenticated","login","email","password","localCognitoUser","CognitoUser","Username","Pool","CognitoUserPool","reject","authenticationDetails","AuthenticationDetails","Password","authenticateUser","onSuccess","warn","getAccessToken","getJwtToken","setCredentials","onFailure","location","hash","signInUserSession","replace","param","idToken","log","accessToken","localStorage","setItem","credentials","CognitoIdentityCredentials","IdentityPoolId","Logins","defineProperty","refresh","post","logout","signOut","protocol","host","loadingApis","hasGatewayApis","hasGenericApis","selectedApiId","params","apiId","Menu","inverted","attached","ApiSubsection","listOfApis","isActive","InfoReplacement","specSelectors","basePath","externalDocs","className","display","flex","marginRight","fontWeight","version","SwaggerUiLayout_SubscriptionButtons","SubscriptionButtons","_React$Component","_getPrototypeOf2","classCallCheck","args","possibleConstructorReturn","getPrototypeOf","call","state","inherits","createClass","onClick","delete","React","Component","SwaggerLayoutPlugin","components","InfoContainer","ApisPage","updateApi","selectIt","thisApi","allApis","getApi","match","swaggerUiConfig","dom_id","plugins","supportedSubmitMethods","spec","onComplete","uiHandler","preauthorizeApiKey","SwaggerUI","errorHeader","errorBody","overflow","components_ApisMenu","icon","Icon","name","circular","Content","AlertPopup","isVisible","message","handleDismiss","setState","hidden","negative","floating","onDismiss","SignIn","isSubmitting","signedIn","errorMessage","isOpen","open","close","handleChange","event","handleLogin","preventDefault","_this$props","e","Redirect","Modal","onOpen","onClose","Form","onSubmit","loading","Input","onChange","autoComplete","Actions","primary","Register","handleRegister","attributeList","signUp","err","register","NavBar","borderless","paddingRight","APIs","authenticated","redirectUri","SignIn_SignIn","Register_Register","App","getCurrentUser","getSession","session","getItem","parse","init","hashRoute","substring","history","pushState","BrowserRouter","components_NavBar","AlertPopup_AlertPopup","Switch","Route","exact","component","Dashboard","Apis","render","ReactDOM","src_App"],"mappings":"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","file":"static/js/main.21018de8.chunk.js","sourcesContent":["// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// react-router\nimport { Link } from 'react-router-dom'\n\n// mobx\nimport { observable } from 'mobx'\n\n// markdown parsing\nimport frontmatter from 'front-matter'\nimport Markdown from 'react-markdown/with-html'\n\nexport const fragments = observable({})\n\nloadHtml('/custom-content/content-fragments/GettingStarted.md', 'GettingStarted')\nloadHtml('/custom-content/content-fragments/Home.md', 'Home')\nloadHtml('/custom-content/content-fragments/APIs.md', 'APIs')\n\n/**\n * \n * Pre-load the custom-content markdown, parses its frontmatter, and renders it as JSX. This method is asynchronous and doesn't actually return anything -- instead, it acts on a MobX Observable -- the fragment. The fragment is an object with a `jsx` property that maps to the rendered component, and any number of other properties collected from the front-matter.\n * \n * @param {String} path   Path to the file to load in. Should be a markdown file.\n * @param {String} fragment   Name of the fragment. Determines where rendered data gets stored.\n * \n * @returns {Object} \n */\nfunction loadHtml(path, fragment) {\n  // if we want to display a loading indicator, this would be where\n  fragments[fragment] = { jsx: () => null }\n\n  fetch(path).then(response => response.text().then(text => {\n    let parsedMarkdown = frontmatter(text)\n\n    fragments[fragment] = {\n      jsx: () => (\n        <Markdown \n          escapeHtml={false} \n          source={parsedMarkdown.body}\n          renderers={renderers}\n        />\n      ),\n      ...parsedMarkdown.attributes\n    }\n  }))\n}\n\n/**\n * Renderers is a map of node type to component. \n * \n * In this case, we only override links. Any time react-markdown tries to render a link, it'll render this component. Normal links will work, but the cause a full page reload. We don't want that, so we can replacing them with react-router Links. However, replacing external links with react-router Links causes them to not work at all. We don't want that either, so we attempt to determine if a link is external or not, and use `Link` or `a` appropriately.\n */\nconst renderers = {\n  link: ({ href, ...props }) => {\n    // if absolute url, use an `a` tag\n    // https://stackoverflow.com/a/19709846/4060061\n    if (/^(?:[a-z]+:)?\\/\\//i.test(href))\n      return <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...props} />\n\n    // replace links with react-router-dom tags so that they \n    return <Link to={href} {...props} />\n  }\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\n\nexport const awsRegion = window.config.region\nexport const cognitoRegion = window.config.region\nexport const cognitoUserPoolId = window.config.userPoolId\nexport const cognitoIdentityPoolId = window.config.identityPoolId\nexport const cognitoClientId = window.config.userPoolClientId\nexport const cognitoDomain = window.config.userPoolDomain\n\nAWS.config.region = cognitoRegion\n\nlet cachedClient, cachedToken;\n\nexport function initApiGatewayClient({ accessKeyId, secretAccessKey, sessionToken, cognito } = {}, jwtToken) {\n  cachedClient = window.apigClientFactory.newClient({\n    // accessKey: accessKeyId,\n    // secretKey: secretAccessKey,\n    // sessionToken: sessionToken,\n    region: awsRegion,\n    jwtToken: jwtToken\n  })\n\n  // if(jwtToken) {\n  //   console.warn(`Adding JWT token to cachedClient: ${cachedClient}`)\n  //   cachedToken = jwtToken\n  //   cachedClient.jwtToken = cachedToken\n  // }\n}\n\nexport function apiGatewayClient() {\n  if (cachedClient) return Promise.resolve(cachedClient)\n  \n  return new Promise(resolve => {\n    const poller = setInterval(() => {\n      if (cachedClient) {\n        clearInterval(poller)\n        resolve(cachedClient)\n      }\n    }, 100)\n  })\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// react-router\nimport { Link } from 'react-router-dom'\n\n// semantic-ui\nimport { Header, Segment, Container, Image, Button } from 'semantic-ui-react'\n\nexport const HomePage = observer(() => (\n  <React.Fragment>\n    <Segment vertical textAlign='center' style={{ color: \"whitesmoke\", backgroundColor: \"slategray\", padding: \"40px 0px\", margin: \"0px !important\" }}>\n      <Image centered size='small' src='/custom-content/home-image.png' />\n      <Header as='h1' style={{ color: \"whitesmoke\" }}>{fragments.Home.header}</Header>\n      <p>{fragments.Home.tagline}</p>\n      <Link to=\"/getting-started\"><Button positive>{fragments.Home.gettingStartedButton}</Button></Link>\n      <Link to=\"/apis\" style={{ padding: \"0.78571429em 1.5em 0.78571429em\", color: \"white\" }}>{fragments.Home.apiListButton}</Link>\n    </Segment>\n    <Segment vertical style={{ padding: \"40px 0px\", margin: \"0 !important\" }}>\n      <Container fluid text textAlign='justified'>\n        <fragments.Home.jsx />\n      </Container>\n    </Segment>\n  </React.Fragment>\n))\n\nexport default HomePage\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// semantic-ui\nimport { Container } from 'semantic-ui-react'\n\nexport default observer(() => (\n  <Container style={{ padding: \"40px\" }}>\n    <fragments.GettingStarted.jsx />\n  </Container>\n))\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { observable, reaction } from 'mobx'\nimport _ from 'lodash'\n\nimport { getSubscribedUsagePlan } from 'services/api-catalog'\n\n/**\n * A function that returns a new object contain the default store\n */\nfunction storeDefaults() {\n  return {\n    api: undefined,\n    apiKey: undefined,\n    \n    apiList: {\n      loaded: false,\n      apiGateway: [],\n      generic: []\n    },\n\n    cognitoUser: undefined,\n\n    usagePlans: [],\n\n    subscriptions: []\n  }\n}\n\n/**\n * Trick for logging the store: clone the object. i.e. _.cloneDeep(store) or JSON.parse(JSON.stringify(store))\n */\nexport const store = observable({\n  ...(storeDefaults()),\n\n  initialize() {\n    Object.assign(this, storeDefaults())\n\n    return this\n  },\n\n  /**\n   * Reset the entire store to the original values\n   */\n  clear() {\n    return this.initialize()\n  },\n\n  /**\n   * Reset specific keys on the store to their initial values\n   * \n   * @param {string[]} keys   The keys that should be reset. Accepts lodash paths. (e.g. )\n   */\n  reset(...keys) {\n    const defaults = storeDefaults()\n    keys.forEach(key =>_.set(this, key, _.get(defaults, key)))\n    return this\n  },\n\n  resetUserData() {\n    this.reset('apiKey', 'cognitoUser', 'subscriptions')\n  }\n})\n\n/**\n * \n * A short-hand function for creating reactions with protections against cyclical errors.\n * \n * @param {Function} triggerFn   A function that determines when fire the effectFn and what to pass to the effectFn.\n * @param {Function} effectFn   The side-effect to run when the data tracked by the triggerFn is changed.\n * \n * A note on MobX reactions: the side effect will \"only react to data that was accessed in the data expression\" and will only fire \"when the data returned by the expression has changed\". (https://mobx.js.org/refguide/reaction.html)\n */\nfunction reactTo(triggerFn, effectFn) {\n  // note -- had issues with cyclical reactions in the past\n  // the comments below will fix them if they come up again\n  // DO NOT REMOVE THEM\n\n  // function restartReaction() {\n    reaction(\n      triggerFn,\n      (data, action) => {\n        // action.dispose() // clear this \"listener\" so we don't cycle\n        \n        effectFn(data, action)\n\n        // restartReaction() // restart the reaction after doing stuff to the data\n      }\n    )\n  // }\n\n  // restartReaction()\n}\n\nreactTo(\n  () => ({ subscriptions: store.subscriptions, usagePlans: store.usagePlans }),\n  ({ usagePlans }) => {\n    updateSubscriptionStatus(usagePlans)\n  }\n)\n\nreactTo(\n  () => [].concat(store.apiList.apiGateway, store.apiList.generic),\n  apiList => {\n    fetchApiImage(apiList)\n  }\n)\n\n/**\n * \n */\nfunction fetchApiImage(apiList) {\n  apiList.forEach(api => {\n    if (!api.logo) {\n      let specificLogo = `/custom-content/api-logos/${api.id}_${api.stage}.png`\n  \n      // fetch automatically follows redirects; setting redirect to `manual` prevents this\n      // we need to prevent it so that we can accurately determine if the image exists\n      fetch(specificLogo, { headers: { Accept: \"image/png\" }, redirect: \"manual\" }).then(response => {\n        if (response.ok)\n          api.logo = specificLogo\n\n        else api.logo = '/custom-content/api-logos/default.png'\n      })\n    }\n  })\n}\n\n/**\n * A helper function that simple re-builds the subscribed status for each api in the catalog.\n * \n * Should be run every time either the catalog updates or the \n */\nfunction updateSubscriptionStatus(usagePlans) {\n  if (usagePlans)\n    usagePlans.forEach(usagePlan => {\n      let subscribed = !!getSubscribedUsagePlan(usagePlan.id)\n      usagePlan.subscribed = subscribed\n\n      usagePlan.apis.forEach(api => api.subscribed = subscribed)\n    })\n}\n\nexport default store.initialize()\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport _ from 'lodash'\n\nimport { apiGatewayClient } from './api'\nimport { store } from './state'\n\n/* Catalog and API Utils */\n\n/**\n * \n * Does all operations to get user data at once.\n * \n * @param {Boolean} bustCache=true   Ignore the cache and re-make the calls? Defaults to true.\n */\nexport function updateAllUserData(bustCache = true) {\n  return Promise.all([\n    updateUsagePlansAndApisList(bustCache),\n    updateSubscriptions(bustCache),\n    updateApiKey(bustCache)\n  ])\n}\n\n/**\n * \n * Update the catalog for the current user. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n * \n */\nexport function updateUsagePlansAndApisList(bustCache = false) {\n  // if we've already tried, just return that promise\n  if (!bustCache && catalogPromiseCache) return catalogPromiseCache\n\n  return catalogPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/catalog', {}, {}, {}))\n    .then(({ data = [] }) => {\n      store.usagePlans = data.apiGateway\n      store.apiList = {\n        loaded: true,\n        apiGateway: getApiGatewayApisFromUsagePlans(store.usagePlans), // MUST create\n        generic: data.generic\n      }\n    })\n    .catch(() => {\n      store.usagePlans = null\n      store.apiList = {\n        loaded: true,\n        apiGateway: [],\n        generic: []\n      }\n    })\n}\nlet catalogPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\n/**\n * A function that takes an input usage plans and creates an list of apis out of it.\n * \n * - Makes sure each api has a non-recursive 'usagePlan' object\n * \n * returns an array of apis\n */\nfunction getApiGatewayApisFromUsagePlans(usagePlans) {\n  return usagePlans.reduce((acc, usagePlan) => {\n\n    usagePlan.apis.forEach(api => {\n      api.usagePlan = _.cloneDeep(usagePlan)\n      // remove the apis from the cloned usagePlan so we don't go circular\n      delete api.usagePlan.apis\n    })\n\n    return acc.concat(usagePlan.apis)\n  }, [])\n}\n\n/**\n * Return the API with the provided apiId. Can also provide the special strings \"FIRST\" or \"ANY\" to get the first API returned. Can select the api returned as a side-effect.\n * \n * @param {String} apiId   An apiId or the special strings 'FIRST' or 'ANY'. 'FIRST' and 'ANY' both return the first api encountered.\n * @param {Boolean} [selectIt=false]   If true, sets the found API as the current 'selected' API.\n */\nexport function getApi(apiId, selectIt = false) {\n  return updateUsagePlansAndApisList()\n    .then(() => {\n      let thisApi\n\n      let allApis = [].concat(store.apiList.apiGateway, store.apiList.generic)\n  \n      if (allApis.length) {\n        if (apiId === 'ANY' || apiId === 'FIRST') {\n          thisApi = allApis[0]\n        }\n\n        else {\n          thisApi = allApis.find(api => api.id.toString() === apiId)\n        }\n      }\n\n      if (selectIt) store.api = thisApi\n\n      return thisApi\n    })\n}\n\n/* Subscription Utils */\n\n/**\n * Fetch and update subscriptions store. Uses caching to determine if it should actually fetch or return the stored result.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n */\nexport function updateSubscriptions(bustCache = false) {\n  let subscriptionsOrPromise = store.subscriptions.length ? store.subscriptions : subscriptionsPromiseCache\n  if (!bustCache && subscriptionsOrPromise) return Promise.resolve(subscriptionsOrPromise)\n\n  return subscriptionsPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions', {}, {}, {}))\n    .then(({ data }) => (store.subscriptions = data))\n}\nlet subscriptionsPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\nexport function getSubscribedUsagePlan(usagePlanId) {\n  return store.subscriptions.find(sub => sub.id === usagePlanId)\n}\n\nexport function subscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/subscriptions/' + usagePlanId, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\nexport function unsubscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.delete(`/subscriptions/${usagePlanId}`, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\n/**\n * \n * Fetches and updates the apiKey in the store. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n */\nexport function updateApiKey(bustCache) {\n  let apiKeyOrPromise = store.apiKey ? store.apiKey : apiKeyPromiseCache\n  if (!bustCache && apiKeyOrPromise) return Promise.resolve(apiKeyOrPromise)\n\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/apikey', {}, {}, {}))\n    .then(({data}) => (store.apiKey = data.value))\n}\nlet apiKeyPromiseCache\n\nexport function fetchUsage(usagePlanId) {\n  const date = new Date()\n  const start = new Date(date.getFullYear(), date.getMonth(), 1).toJSON().split('T')[0]\n  const end = date.toJSON().split('T')[0]\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions/' + usagePlanId + '/usage', { start, end }, {}))\n}\n\nexport function mapUsageByDate(usage, usedOrRemaining) {\n  const dates = {}\n  Object.keys(usage.items).forEach(apiKeyId => {\n    const apiKeyUsage = mapApiKeyUsageByDate(usage.items[apiKeyId], usage.startDate, usedOrRemaining)\n\n    // handles the bizarre case that the user has more than one api key\n    // currently not possible (and my never be), so we probably don't need it\n    apiKeyUsage.forEach(dailyUsage => {\n      const date = dailyUsage[0]\n      const used = dailyUsage[1]\n      const remaining = dailyUsage[2]\n      \n      if (!dates[date])\n      dates[date] = { used: 0, remaining: 0 }\n\n      dates[date].used += used\n      dates[date].remaining += remaining\n    })\n  })\n  \n  const usageByDate = Object.keys(dates).sort().map(date => [\n    parseInt(date, 10), \n    dates[date].used, \n    dates[date].remaining \n  ])\n  \n  return usageByDate\n}\n\nfunction mapApiKeyUsageByDate(apiKeyUsage, startDate) {\n  const apiKeyDate = new Date(startDate)\n  \n  if (apiKeyUsage && !Array.isArray(apiKeyUsage[0]))\n    apiKeyUsage = [apiKeyUsage]\n  \n  return apiKeyUsage.map((usage) => {\n    const date = apiKeyDate.setDate(apiKeyDate.getDate())\n    const item = [date, ...usage]\n    apiKeyDate.setDate(apiKeyDate.getDate() + 1)\n    return item\n  })\n}\n\n/* Marketplace integration */\n\nexport function confirmMarketplaceSubscription(usagePlanId, token) {\n  if (!usagePlanId) {\n    return\n  }\n  \n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/marketplace-subscriptions/' + usagePlanId, {}, {\"token\" : token}))\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nexport function getQueryString() {\n  const { search: q } = window.location\n\n  if (!q) return {}\n\n  return (/^[?#]/.test(q) ? q.slice(1) : q)\n    .split('&')\n    .reduce((params, param) => {\n      let [ key, value ] = param.split('=');\n      params[key] = value ? decodeURIComponent(value) : '';\n      return params;\n    }, { })\n}\n\nexport function toTitleCase(string) {\n\tlet firstLetter = string[0]\n\tlet allOtherLetters = string.slice(1)\n\n\treturn firstLetter.toUpperCase() + allOtherLetters.toLowerCase()\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\nimport { Grid, Header, Popup, Loader, Message, List, Divider } from 'semantic-ui-react'\n\nimport Chart from 'chart.js'\nimport { fetchUsage, mapUsageByDate } from 'services/api-catalog'\nimport { toTitleCase } from 'services/misc'\n\nimport { observer } from 'mobx-react'\n\nimport { store } from 'services/state'\n\nimport _ from 'lodash'\n\nfunction loadUsage(usagePlan, canvasId) {\n  fetchUsage(usagePlan.id)\n    .then((result) => {\n      const data = mapUsageByDate(result.data, 'used')\n      const ctx = document.getElementById(canvasId)\n\n      let oldDataString = JSON.stringify(_.get(usagePlan, 'usage.data', {}))\n      let newDataString = JSON.stringify(data)\n\n      if (oldDataString !== newDataString)\n        usagePlan.usage = { data }\n\n      const labels = data.map(d => new Date(d[0]).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }))\n      const used = data.map(d => d[1])\n      const remaining = data.map(d => d[2])\n      const max = Math.max(...used, ...remaining)\n\n      const chartConfig = {\n        type: 'line',\n        data: {\n          labels,\n          datasets: [\n            {\n              label: `Requests used` + (usagePlan.quota ? ` (per ${toTitleCase(usagePlan.quota.period)})` : ''),\n              data: used,\n              lineTension: 0,\n              backgroundColor: '#00bfff',\n              borderColor: '#00bfff',\n              pointBackgroundColor: 'transparent',\n              pointBorderColor: 'transparent',\n              borderWidth: 2,\n              pointRadius: 10,\n              pointHoverRadius: 10\n\n            },\n            {\n              label: `Remaining requests` + (usagePlan.quota ? ` (per ${toTitleCase(usagePlan.quota.period)})` : ''),\n              data: remaining,\n              lineTension: 0,\n              backgroundColor: 'transparent',\n              borderColor: 'red',\n              pointBackgroundColor: 'transparent',\n              pointBorderColor: 'transparent',\n              borderWidth: 2,\n              pointRadius: 10,\n              pointHoverRadius: 10\n            }\n          ]\n        },\n        options: { \n          scales: { yAxes: [ { ticks: {\n            beginAtZero: true,\n            suggestedMax: max + (max * 0.02)\n          } } ] }\n        }\n      }\n\n      new Chart(ctx, chartConfig)\n    })\n    .catch((error) => {\n      console.error(error)\n      if (!usagePlan.usage)\n        usagePlan.usage = { }\n\n      usagePlan.usage.error = error\n    })\n}\n\nexport default observer(() => {\n  return (\n    <Grid container>\n      <Grid.Row>\n        <Grid.Column style={{ paddingTop: \"40px\" }}>\n          <Header size=\"medium\">API Key</Header>\n          <code style={{\n            background: \"black\",\n            border: \"1px solid gray\",\n            padding: \"7px 8px\",\n            color: \"lightgray\",\n            borderRadius: \"5px\"\n          }}>\n            {store.apiKey}\n          </code>\n        </Grid.Column>\n      </Grid.Row>\n      <Divider />\n      <Grid.Row>\n\n        {store.usagePlans\n          .filter(usagePlan => usagePlan.subscribed && usagePlan.apis.length)\n          .map((usagePlan, index) => {\n            let canvasId = `api-usage-chart-container-${usagePlan.id}` + index\n\n            loadUsage(usagePlan, canvasId)\n\n            return (\n              <Grid.Column width={16} widescreen={8} key={usagePlan.id} style={{ marginBottom: \"40px\" }}>\n                <Title apis={usagePlan.apis} />\n                {usagePlan.throttle && (\n                  <Message info>\n                    <p>\n                      Requests limited to {usagePlan.throttle.rateLimit} per second, and {usagePlan.throttle.burstLimit} in a burst.\n                    </p>\n                  </Message>\n                )}\n                {!usagePlan.usage ? (\n                  <Loader active />\n                ) : (\n                    usagePlan.error ? (\n                      <Message error content={usagePlan.error.toString()} />\n                    ) : null\n                  )}\n                <canvas id={canvasId} />\n              </Grid.Column>\n            )\n          })}\n      </Grid.Row>\n    </Grid>\n  )\n})\n\nconst Title = ({ apis }) => {\n  let firstApiName = apis[0].swagger.info.title\n\n  let apiList = (\n    <List> \n      { apis.reduce((acc, api) => acc.concat(\n        <List.Item key={api.id}>{api.swagger.info.title}</List.Item>\n      ), []) } \n    </List>\n  )\n\n  let extraApiCount = apis.length - 1\n\n  return (\n    <Header size=\"medium\">\n      Usage for {extraApiCount ? (\n        <Popup\n          trigger={ <a style={{ cursor: \"pointer\" }}>{firstApiName} and {extraApiCount} more...</a> }\n          content={ apiList }\n          on={['hover', 'click']}\n          position=\"right center\"\n        />\n      ) : (\n        firstApiName\n      )}\n    </Header>\n  )\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\nimport { CognitoUserPool, CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js'\n\n// services\nimport { store } from 'services/state'\nimport { updateAllUserData } from 'services/api-catalog'\nimport { initApiGatewayClient, apiGatewayClient, cognitoDomain, cognitoIdentityPoolId, cognitoUserPoolId, cognitoClientId, cognitoRegion } from 'services/api'\n\nconst poolData = {\n  UserPoolId: cognitoUserPoolId,\n  ClientId: cognitoClientId\n}\n\nlet userPool\n\nexport function isAuthenticated() {\n  return store.cognitoUser\n}\n\nfunction getCognitoLoginKey() {\n  return `cognito-idp.${cognitoRegion}.amazonaws.com/${cognitoUserPoolId}`\n}\n\nexport function init() {\n  // attempt to refresh credentials from active session\n  userPool = new CognitoUserPool(poolData)\n  store.cognitoUser = userPool.getCurrentUser()\n\n  if (store.cognitoUser !== null) {\n    store.cognitoUser.getSession(function(err, session) {\n      if (err) {\n        logout()\n        console.error(err)\n        return\n      }\n\n      setCredentials(store.cognitoUser)\n    })\n  } else {\n    let signInUserSession = localStorage.getItem(JSON.stringify(poolData))\n    if (signInUserSession) {\n      \n      store.cognitoUser = new CognitoUser({\n        Username: '', // blank user name if we aren't using username and password\n        Pool: userPool\n      })\n\n      store.cognitoUser.signInUserSession = JSON.parse(signInUserSession)\n\n      setCredentials(store.cognitoUser)\n    }\n    initApiGatewayClient()\n  }\n}\n\nexport function register(email, password) {\n  localStorage.clear()\n  const attributeList = []\n  return new Promise((resolve, reject) => {\n    userPool.signUp(email, password, attributeList, null, (err, result) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(login(email, password))\n      }\n    })\n  })\n}\n\nexport function login(email, password) {\n  let localCognitoUser = new CognitoUser({\n    Username: email || '', // blank user name if we aren't using username and password\n    Pool: new CognitoUserPool(poolData)\n  })\n\n  if (email && password) {\n    return new Promise((resolve, reject) => {\n      const authenticationDetails = new AuthenticationDetails({\n        Username: email,\n        Password: password\n      })\n\n      localCognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: (result) => {\n\n          console.warn(result.getAccessToken().getJwtToken());\n\n          store.cognitoUser = localCognitoUser\n\n          setCredentials(store.cognitoUser)\n            .then(resolve)\n            .catch(reject)\n        },\n\n        onFailure: reject\n      })\n    })\n  } else if (window.location.hash) { // assume we're grabbing tokens out of the hash\n    // fake the signInUserSession\n    localCognitoUser.signInUserSession = {}\n\n      console.warn(window.location.hash);\n\n    window.location.hash\n      .replace(/^#/,'')\n      .split('&')\n      .map(param => param.split('='))\n      .forEach(param => {\n        // add real data to the fake signInUserSession\n        if (param[0] === 'id_token') {\n            localCognitoUser.signInUserSession.idToken = {jwtToken: param[1]}\n            console.log(`I set the ${param[0]} to ${param[1]}`)\n        }\n\n\n        if (param[0] === 'access_token') {\n            localCognitoUser.signInUserSession.accessToken = {jwtToken: param[1]}\n            console.log(`I set the ${param[0]} to ${param[1]}`)\n        }\n\n\n        // will use this value to auto-log out... eventually\n        // if (param[0] === 'expires_in')\n          // console.log(param[1])\n      })\n\n    if (localCognitoUser.signInUserSession.idToken) {\n      localStorage.setItem(JSON.stringify(poolData), JSON.stringify(localCognitoUser.signInUserSession))\n\n      store.cognitoUser = localCognitoUser\n\n      setCredentials(store.cognitoUser)\n    }\n  }\n}\n\nfunction setCredentials(cognitoUser) {\n  AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: cognitoIdentityPoolId,\n    Logins: {\n      [getCognitoLoginKey()]: cognitoUser.signInUserSession.idToken.jwtToken\n    }\n  })\n\n  AWS.config.credentials.refresh((error) => {\n    if (error) {\n      console.error(error)\n      return Promise.reject(error)\n    }\n\n    // console.warn(AWS.config.credentials);\n\n    initApiGatewayClient(AWS.config.credentials, cognitoUser.signInUserSession.accessToken.jwtToken)\n    updateAllUserData()\n\n    return apiGatewayClient()\n      .then(apiGatewayClient => apiGatewayClient.post('/signin', {}, {}, {}))\n  })\n}\n\nexport function logout() {\n  if (store.cognitoUser) {\n    store.cognitoUser.signOut()\n    store.resetUserData()\n    localStorage.clear()\n\n    if (cognitoDomain) {\n      // redirect to cognito to log out there, too\n      window.location = `${cognitoDomain}/logout?client_id=${cognitoClientId}&logout_uri=${window.location.protocol}//${window.location.host}`;\n    }\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\n// semantic-ui\nimport { Menu, Loader } from 'semantic-ui-react'\n\n// store\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state'\n\n// utilities\nimport _ from 'lodash'\n\nfunction isActive (apiId, selectedApiId) {\n  return (selectedApiId) ? apiId === selectedApiId : false\n}\n\nexport default observer(function ApisMenu() {\n  const loadingApis = !store.apiList.loaded\n  const hasGatewayApis = !!_.get(store, 'apiList.apiGateway.length')\n  const hasGenericApis = !!_.get(store, 'apiList.generic.length')\n\n  // either grab the selectedApiId from the path OR\n  // grab it from the first apiGateway api OR\n  // grab it from the first generic api\n  const selectedApiId = (\n    this.props.path.params.apiId ||\n    (hasGatewayApis && store.apiList.apiGateway[0].id) ||\n    (hasGenericApis && store.apiList.generic[0].id)\n  )\n\n  // If we're still loading, display a spinner.\n  // If we're not loading, and we don't have any apis, display a message.\n  // If we're not loading, and we have some apis, render the appropriate api subsections for apiGateway and generic apis \n  return (\n    <Menu inverted vertical attached style={{ margin: 0, borderRadius: 0 }} {...this.props}>\n      {loadingApis ? (\n        <Loader active />\n      ) : (\n        (hasGatewayApis || hasGenericApis) ? (\n          <React.Fragment>\n            {hasGatewayApis && <ApiSubsection title=\"Subscribable\" listOfApis={store.apiList.apiGateway} selectedApiId={selectedApiId} />}\n            {hasGenericApis && <ApiSubsection title=\"Not Subscribable\" listOfApis={store.apiList.generic} selectedApiId={selectedApiId} />}\n          </React.Fragment>\n        ) : (\n          <p style={{ padding: \"13px 16px\", color: \"whitesmoke\" }}>No APIs Published</p>\n        )\n      )}\n    </Menu>\n  )\n})\n\nfunction ApiSubsection({ title, listOfApis, selectedApiId }) {\n  return (\n    <React.Fragment>\n      <Menu.Header\n        style={{\n          padding: \"13px 5px 13px 16px\",\n          color: 'lightsteelblue'\n        }}\n      >\n        {title}\n      </Menu.Header>\n      {listOfApis.map(api => (\n        <Menu.Item\n          key={api.id}\n          as={Link}\n          to={`/apis/${api.id}`}\n          active={isActive(api.id.toString(), selectedApiId.toString())}\n        >\n          {api.swagger.info.title}\n        </Menu.Item>\n      ))}\n    </React.Fragment>\n  )\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// semantic-ui\nimport { Button, Header, Image, Container } from 'semantic-ui-react'\n\n// services\nimport { subscribe, unsubscribe } from 'services/api-catalog'\nimport { isAuthenticated } from 'services/self'\n\n// state\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state.js'\n\n// Create the plugin that provides our layout component\nexport const SwaggerLayoutPlugin = () => ({ components: { InfoContainer: InfoReplacement } })\n\n// replaces the InfoContainer component\n// https://github.com/swagger-api/swagger-ui/blob/dd3afdc45656bda2a64ae6a7f9bdad006ea98149/src/core/components/layouts/base.jsx\n\nconst InfoReplacement = observer(({ specSelectors }) => {\n  const basePath = specSelectors.basePath()\n  const host = specSelectors.host()\n  const externalDocs = specSelectors.externalDocs()\n\n  return (\n    <Container fluid textAlign='left' className=\"fixfloat\" style={{ padding: \"40px 0px\" }}>\n      <div style={{ display: \"flex\" }}>\n        <div style={{ flex: \"0 0 auto\", marginRight: \"20px\" }}>\n          <Image size='small' src={store.api.logo} />\n        </div>\n        <div>\n          <Header as='h1'>{store.api.swagger.info.title}</Header>\n          <div style={{ display: \"flex\" }}>\n            <div style={{ marginRight: \"20px\" }}>\n              {store.api.generic && (\n                <p style={{ fontWeight: \"bold\" }}>Version</p>\n              )}\n              <p style={{ fontWeight: \"bold\" }}>Endpoint</p>\n              {/* <p style={{ fontWeight: \"bold\" }}>Usage Plan</p> */}\n            </div>\n            <div>\n              {store.api.generic && (\n                <p>{store.api.swagger.info.version}</p>\n              )}\n              <p>https://{host}{basePath}</p>\n              {/* <p>{store.api.usagePlan.name}</p> */}\n            </div>\n          </div>\n          <p>{externalDocs}</p>\n          <SubscriptionButtons />\n        </div>\n      </div>\n    </Container>\n  )\n})\n\nconst SubscriptionButtons = observer(class SubscriptionButtons extends React.Component {\n  state = {}\n\n  render() {\n    const { api } = store\n    return (\n      (api && isAuthenticated()) ? !api.generic ? (\n        api.subscribed ? (\n          <Button onClick={() => unsubscribe(api.usagePlan.id)}>Unsubscribe</Button>\n        ) : (\n          <Button onClick={() => subscribe(api.usagePlan.id)} >Subscribe</Button>\n        )\n      ) : <Header as='h4' color='darkgrey'>This API is not configured for subscription from the portal.</Header> : null\n    )\n  }\n})\n\n\nexport default SwaggerLayoutPlugin","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// swagger-ui\nimport SwaggerUI from 'swagger-ui'\nimport 'swagger-ui/dist/swagger-ui.css'\n\n// semantic-ui\nimport { Container, Header, Icon } from 'semantic-ui-react'\n\n// services\nimport { getApi } from 'services/api-catalog'\nimport { isAuthenticated } from 'services/self'\n\n// components\nimport ApisMenu from 'components/ApisMenu'\nimport SwaggerLayoutPlugin from 'components/SwaggerUiLayout'\n\n// state\nimport { store } from 'services/state.js'\nimport { observer } from 'mobx-react'\n\nexport default observer(class ApisPage extends React.Component {\n  componentDidMount() { this.updateApi() }\n  componentDidUpdate() { this.updateApi() }\n\n  updateApi = () => {\n    getApi(this.props.match.params.apiId || 'ANY', true)\n      .then(api => {\n        if (api) {\n          let swaggerUiConfig = {\n            dom_id: '#swagger-ui-container',\n            plugins: [SwaggerLayoutPlugin],\n            supportedSubmitMethods: [],\n            spec: api.swagger,\n            onComplete: () => {\n              if (store.apiKey)\n                uiHandler.preauthorizeApiKey(\"api_key\", store.apiKey)\n            }\n          }\n          if (isAuthenticated()) {\n            delete swaggerUiConfig.supportedSubmitMethods\n          }\n          let uiHandler = SwaggerUI(swaggerUiConfig)\n        }\n      })\n  }\n\n  render() {\n    let errorHeader\n    let errorBody \n\n    if (!store.apiList.apiGateway.length && !store.apiList.generic.length) {\n      errorHeader = `No APIs Published`\n      errorBody = `Your administrator hasn't added any APIs to your account. Please contact them to publish an API.`\n    } else if (!store.api) {\n      errorHeader = `No Such API`\n      errorBody = `The selected API doesn't exist.`\n    }\n\n    return (\n      <div style={{ display: \"flex\", flex: \"1 1 auto\", overflow: \"hidden\" }}>\n        <ApisMenu path={this.props.match} style={{ flex: \"0 0 auto\" }} />\n        <div className=\"swagger-section\" style={{ flex: \"1 1 auto\", overflow: 'auto' }}>\n          <div className=\"swagger-ui-wrap\" id=\"swagger-ui-container\" style={{ padding: \"0 20px\" }}>\n            {errorHeader && errorBody && (\n              <React.Fragment>\n                <Header as='h2' icon textAlign=\"center\" style={{ padding: \"40px 0px\" }}>\n                  <Icon name='warning sign' circular />\n                  <Header.Content>{errorHeader}</Header.Content>\n                </Header>\n                <Container text textAlign='justified'>\n                  <p>{errorBody}</p>\n                </Container>\n              </React.Fragment>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n})\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Message } from 'semantic-ui-react'\n\nexport default class AlertPopup extends React.Component {\n  state = {\n    isVisible: false,\n    message: ''\n  }\n\n  handleDismiss = () => {\n    this.setState({ isVisible: false })\n  }\n\n  render() {\n      return (\n        <Message\n          hidden={!this.state.isVisible}\n          negative\n          floating\n          icon='warning sign'\n          onDismiss={this.handleDismiss}\n          header='Error'\n          content={this.state.message}\n        />\n      )\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Button, Form, Message, Modal } from 'semantic-ui-react'\nimport { Redirect } from 'react-router-dom'\nimport { login } from 'services/self'\nimport { confirmMarketplaceSubscription } from 'services/api-catalog'\n\n export default class SignIn extends React.Component {\n   state = {\n     isSubmitting: false,\n     signedIn: false,\n     errorMessage: '',\n     isOpen: false\n   }\n   open = () => this.setState({ isSubmitting: false, errorMessage: '', isOpen: true })\n   close = () => this.setState({ isOpen: false })\n\n   handleChange = (event, { name, value }) => this.setState({ [name]: value })\n   handleLogin = (event) => {\n    event.preventDefault()\n    this.setState({isSubmitting: true})\n\n    login(this.state.email, this.state.password)\n    .then(() => {\n        this.setState({signedIn: true, isSubmitting: false, errorMessage: ''})\n\n        const { usagePlanId, token } = this.props\n\n        if (usagePlanId && token) {\n   \t       return confirmMarketplaceSubscription(usagePlanId, token)\n        }\n    })\n    .catch((e) => this.setState({errorMessage: e.message, isSubmitting: false}))\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return this.state.signedIn ? <Redirect to='/apis' /> : (\n      <Modal\n        size='small'\n        open={isOpen}\n        onOpen={this.open}\n        onClose={this.close}\n        trigger={this.props.trigger}\n      >\n        <Modal.Header>Sign in</Modal.Header>\n        <Modal.Content>\n          <Form onSubmit={this.handleLogin} error={!!this.state.errorMessage} loading={this.state.isSubmitting}>\n            <Form.Input label='Email' name='email' onChange={this.handleChange} />\n            <Form.Input type='password' label='Password' name='password' autoComplete='false' onChange={this.handleChange} />\n            <Message error content={this.state.errorMessage} />\n            <Modal.Actions style={{textAlign: 'right'}}>\n              <Button type='button' onClick={this.close}>Close</Button>\n              <Button primary type='submit'>Sign In</Button>\n            </Modal.Actions>\n          </Form>\n        </Modal.Content>\n      </Modal>)\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Button, Form, Message, Modal } from 'semantic-ui-react'\nimport { Redirect } from 'react-router-dom'\nimport { register } from 'services/self'\nimport { confirmMarketplaceSubscription } from 'services/api-catalog'\n\n export default class Register extends React.Component {\n  state = {\n    isSubmitting: false,\n    signedIn: false,\n    errorMessage: '',\n    isOpen: false\n  }\n\n  open = () => this.setState({ isSubmitting: false, errorMessage: '', isOpen: true })\n  close = () => this.setState({ isOpen: false })\n\n  handleChange = (event, { name, value }) => this.setState({ [name]: value })\n  handleRegister = (event) => {\n    event.preventDefault()\n    this.setState({ isSubmitting: true })\n\n    register(this.state.email, this.state.password)\n    .then(() => {\n        this.setState({signedIn: true, isSubmitting: false, errorMessage: ''})\n\n        const { usagePlanId, token } = this.props\n\n        if (usagePlanId && token) {\n   \t       return confirmMarketplaceSubscription(usagePlanId, token)\n        }\n    })\n    .catch((e) => this.setState({errorMessage: e.message, isSubmitting: false}))\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return this.state.signedIn ? <Redirect to='/apis' /> : (\n      <Modal\n        size='small'\n        open={isOpen}\n        onOpen={this.open}\n        onClose={this.close}\n        trigger={this.props.trigger}\n      >\n        <Modal.Header>Register</Modal.Header>\n        <Modal.Content>\n          <Form onSubmit={this.handleRegister} error={!!this.state.errorMessage} loading={this.state.isSubmitting}>\n            <Form.Input label='Email' name='email' onChange={this.handleChange} />\n            <Form.Input type='password' label='Password' name='password' autoComplete='false' onChange={this.handleChange} />\n            <Message error content={this.state.errorMessage} />\n            <Modal.Actions style={{textAlign: 'right'}}>\n              <Button type='button' onClick={this.close}>Close</Button>\n              <Button primary type='submit'>Register</Button>\n            </Modal.Actions>\n          </Form>\n        </Modal.Content>\n      </Modal>)\n    }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Menu, Image } from 'semantic-ui-react'\n\nimport { isAuthenticated, logout } from 'services/self'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// components\nimport SignIn from './SignIn'\nimport Register from './Register'\n\n// data\nimport { cognitoDomain, cognitoClientId } from '../services/api'\n\nexport const NavBar = observer(() => {\n  return (\n    <Menu inverted borderless attached style={{ flex: \"0 0 auto\" }}>\n      <Menu.Item as={Link} to=\"/\">\n        <Image size='mini' src=\"/custom-content/nav-logo.png\" style={{ paddingRight: \"10px\" }} />\n        {fragments.Home.title}\n      </Menu.Item>\n\n      <Menu.Item as={Link} to=\"/getting-started\">{fragments.GettingStarted.title}</Menu.Item>\n      <Menu.Item as={Link} to=\"/apis\">{fragments.APIs.title}</Menu.Item>\n      \n      {insertAuthMenu(isAuthenticated(), cognitoDomain)}\n    </Menu>\n  )\n})\n\nfunction insertAuthMenu(authenticated, cognitoDomain) {\n  let redirectUri = `${window.location.protocol}//${window.location.host}/login`\n\n  if (authenticated) {\n    return (\n      <Menu.Menu position=\"right\">\n        <Menu.Item key=\"signout\" as=\"a\" onClick={logout}>Sign Out</Menu.Item>\n        <Menu.Item key=\"dashboard\" as={Link} to=\"/dashboard\">My Dashboard</Menu.Item>\n      </Menu.Menu>\n    )\n  } else {\n    if (cognitoDomain) {\n      return (\n        <Menu.Menu position=\"right\">\n          <Menu.Item key=\"signin\" as=\"a\" href={`${cognitoDomain}/login?response_type=token&client_id=${cognitoClientId}&redirect_uri=${redirectUri}`}>Sign In</Menu.Item>\n          <Menu.Item key=\"register\" as=\"a\" href={`${cognitoDomain}/signup?response_type=token&client_id=${cognitoClientId}&redirect_uri=${redirectUri}`}>Register</Menu.Item>\n        </Menu.Menu>\n      )\n    } \n    \n    else {\n      return (\n        <Menu.Menu position=\"right\">\n          <SignIn key=\"signin\" trigger={<Menu.Item as=\"a\">Sign In</Menu.Item>} />\n          <Register key=\"register\" trigger={<Menu.Item as=\"a\">Register</Menu.Item>} />\n        </Menu.Menu>\n      )\n    }\n  }\n}\n\nexport default NavBar\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\n\n// content-fragments (import here to start this ASAP)\nimport 'services/get-fragments'\n\n// semantic-ui\nimport 'semantic-ui-css/semantic.css'\n\n// pages\nimport Home from 'pages/Home'\nimport GettingStarted from 'pages/GettingStarted'\nimport Dashboard from 'pages/Dashboard'\nimport Apis from 'pages/Apis'\n\n// components\nimport AlertPopup from 'components/AlertPopup'\nimport NavBar from 'components/NavBar'\n\nimport { init, login, logout } from 'services/self'\nimport './index.css';\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    init()\n\n    // We are using an S3 redirect rule to prefix the url path with #!\n    // This then converts it back to a URL path for React routing\n    if (window.location.hash && window.location.hash[1] === '!') {\n      const hashRoute = window.location.hash.substring(2)\n      window.history.pushState({}, 'home page', hashRoute)\n    }\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <React.Fragment>\n          <NavBar />\n          <AlertPopup />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/getting-started\" component={GettingStarted} />\n            <Route path=\"/dashboard\" component={Dashboard} />\n            <Route exact path=\"/apis\" component={Apis} />\n            <Route path=\"/apis/:apiId\" component={Apis} />\n            <Route path=\"/login\" render={() => (login(), <Redirect to=\"/\" />)}/>\n            <Route path=\"/logout\" render={() => (logout(), <Redirect to=\"/\" />)}/>\n            <Route component={() => <h2>Page not found</h2>} />\n          </Switch>\n        </React.Fragment>\n      </BrowserRouter>\n    )\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}